"use strict";function stripIndent(e){var t=e.match(/^[ \t]*(?=\S)/gm);if(!t)return e;var a=Math.min.apply(Math,t.map(function(e){return e.length})),r=new RegExp("^[ \\t]{"+a+"}","gm");e=a>0?e.replace(r,""):e;var n=e.split(/\r?\n/);return""===n[n.length-1].trim()&&n.splice(n.length-1,1),""===n[0].trim()&&n.splice(0,1),n.join("\n")}function unescapeHtml(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}function processCodeTags(e,t){for(var a=0;a<t.length;a++)if("type"in t[a].dataset){var r=unescapeHtml(t[a].innerHTML),n=t[a].dataset.type;"pre-exercise-code"===n?e["pre-exercise-code"]=r:"sample-code"===n?e["sample-code"]=r:"solution"===n?e.solution=r:"sct"===n?e.sct=r:"hint"===n&&(e.hint=r)}}function createURLData(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}function createIFrame(e,t,a){var r=document.createElement("iframe");r.name=IFRAME_NAME+a;var n,i="border: 1px solid #d5eaef;",o=!0;if("height"in e.dataset){var l=Math.round(e.dataset.height);isNaN(l)?console.log("Invalid height attribute."):l>MIN_HEIGHT?(n=l,o=!1):console.log("The height attribute should be larger than "+MIN_HEIGHT+".")}if(o){var s=MIN_HEIGHT;if("minHeight"in e.dataset){var h=Math.round(e.dataset.minHeight);isNaN(h)?console.log("Invalid min-height attribute."):h>MIN_HEIGHT?s=h:console.log("The min-height attribute should be larger than "+MIN_HEIGHT+".")}var c=t["sample-code"].split(/\r?\n/).length;if(n=Math.max(47+18*(c-2),s),"maxHeight"in e.dataset){var d=Math.round(e.dataset.maxHeight);isNaN(d)?console.log("Invalid max-height attribute."):d>MIN_HEIGHT?n=Math.min(n,d):console.log("The max-height attribute should be larger than "+MIN_HEIGHT+".")}}return r.style.height=n+"px",i+="height:"+n+"px;",r.style.width="100%",r.style.minWidth="600px",i+="width:100%;min-width:600px;",r.setAttribute("style",i),r}function createDataForm(e,t){var a=DATACAMP_LIGHT_URL+(window.location.hostname?window.location.hostname+"/?":"?")+createURLData({}),r=document.createElement("form");r.setAttribute("method","post"),r.setAttribute("action",a),r.setAttribute("target",IFRAME_NAME+t);for(var n in e)if(e.hasOwnProperty(n)){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",n),i.setAttribute("value",stripIndent(e[n])),r.appendChild(i)}return r}function replaceDataCampExercises(){for(var e=document.querySelectorAll("[data-datacamp-exercise]"),t=0;t<e.length;t++){var a=e[t];if(!("lang"in a.dataset))return void console.log("DataCamp-Light: Missing the data-lang attribute.");var r={language:a.dataset.lang,"pre-exercise-code":"","sample-code":"",solution:"",sct:"",hint:""};for(processCodeTags(r,a.querySelectorAll("[data-type]"));a.lastChild;)a.removeChild(a.lastChild);a.appendChild(createIFrame(a,r,t));var n=createDataForm(r,t);a.appendChild(n),n.submit(),a.removeChild(n)}}var MIN_HEIGHT=200,IFRAME_NAME="datacamp-light-iframe-",DATACAMP_LIGHT_URL="https://light.datacamp.com/";document.addEventListener("DOMContentLoaded",replaceDataCampExercises,!1);