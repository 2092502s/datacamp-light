"use strict";function stripIndent(e){var t=e.match(/^[ \t]*(?=\S)/gm);if(!t)return e;var a=Math.min.apply(Math,t.map(function(e){return e.length})),n=new RegExp("^[ \\t]{"+a+"}","gm");e=a>0?e.replace(n,""):e;var r=e.split(/\r?\n/);return""===r[r.length-1].trim()&&r.splice(r.length-1,1),""===r[0].trim()&&r.splice(0,1),r.join("\n")}function unescapeHtml(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}function processCodeTags(e,t){for(var a=0;a<t.length;a++)if("type"in t[a].dataset){var n=unescapeHtml(t[a].innerHTML),r=t[a].dataset.type;"pre-exercise-code"===r?e["pre-exercise-code"]=n:"sample-code"===r?e["sample-code"]=n:"solution"===r?e.solution=n:"sct"===r&&(e.sct=n)}}function processParagraphTags(e,t){for(var a=0;a<t.length;a++)if("type"in t[a].dataset){var n=t[a].dataset.type;"hint"===n&&(e.hint=t[a].innerHTML)}}function createURLData(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(stripIndent(e[a])));return t.join("&")}function replaceDataCampExercises(){for(var e=document.querySelectorAll("[data-datacamp-exercise]"),t=0;t<e.length;t++){var a=e[t];if(!("lang"in a.dataset))return void console.log("DataCamp-Light: Missing the data-lang attribute.");var n={language:a.dataset.lang,"pre-exercise-code":"","sample-code":"",solution:"",sct:"",hint:""};for(processParagraphTags(n,a.getElementsByTagName("p")),processCodeTags(n,a.getElementsByTagName("code"));a.lastChild;)a.removeChild(a.lastChild);var r=DATACAMP_LIGHT_URL+"?"+createURLData(n),i=document.createElement("iframe");i.setAttribute("src",r);var s,o="border: 1px solid #d5eaef;",l=!0;if("height"in a.dataset){var h=Math.round(a.dataset.height);isNaN(h)?console.log("Invalid height attribute."):h>MIN_HEIGHT?(s=h,l=!1):console.log("The height attribute should be larger than "+MIN_HEIGHT+".")}if(l){var c=MIN_HEIGHT;if("minHeight"in a.dataset){var g=Math.round(a.dataset.minHeight);isNaN(g)?console.log("Invalid min-height attribute."):g>MIN_HEIGHT?c=g:console.log("The min-height attribute should be larger than "+MIN_HEIGHT+".")}var d=n["sample-code"].split(/\r?\n/).length;if(s=Math.max(47+18*(d-2),c),"maxHeight"in a.dataset){var p=Math.round(a.dataset.maxHeight);isNaN(p)?console.log("Invalid max-height attribute."):p>MIN_HEIGHT?s=Math.min(s,p):console.log("The max-height attribute should be larger than "+MIN_HEIGHT+".")}}i.style.height=s+"px",o+="height:"+s+"px;",i.style.minWidth="600px",o+="min-width:600px;",i.setAttribute("style",o),a.appendChild(i)}}var MIN_HEIGHT=200,DATACAMP_LIGHT_URL="https://light.datacamp.com/";document.addEventListener("DOMContentLoaded",replaceDataCampExercises,!1);
