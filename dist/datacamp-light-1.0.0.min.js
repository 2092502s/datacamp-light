"use strict";function stripIndent(e){var t=e.match(/^[ \t]*(?=\S)/gm);if(!t)return e;var a=Math.min.apply(Math,t.map(function(e){return e.length})),r=new RegExp("^[ \\t]{"+a+"}","gm");e=a>0?e.replace(r,""):e;var n=e.split(/\r?\n/);return""===n[n.length-1].trim()&&n.splice(n.length-1,1),""===n[0].trim()&&n.splice(0,1),n.join("\n")}function unescapeHtml(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}function processCodeTags(e,t){for(var a=0;a<t.length;a++)if("type"in t[a].dataset){var r=unescapeHtml(t[a].innerHTML),n=t[a].dataset.type;"pre-exercise-code"===n?e["pre-exercise-code"]=r:"sample-code"===n?e["sample-code"]=r:"solution"===n?e.solution=r:"sct"===n&&(e.sct=r)}}function processParagraphTags(e,t){for(var a=0;a<t.length;a++)if("type"in t[a].dataset){var r=t[a].dataset.type;"hint"===r&&(e.hint=t[a].innerHTML)}}function createURLData(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}function createIFrame(e,t){var a=document.createElement("iframe");a.setAttribute("name",IFRAME_NAME);var r,n="border: 1px solid #d5eaef;",i=!0;if("height"in e.dataset){var o=Math.round(e.dataset.height);isNaN(o)?console.log("Invalid height attribute."):o>MIN_HEIGHT?(r=o,i=!1):console.log("The height attribute should be larger than "+MIN_HEIGHT+".")}if(i){var s=MIN_HEIGHT;if("minHeight"in e.dataset){var l=Math.round(e.dataset.minHeight);isNaN(l)?console.log("Invalid min-height attribute."):l>MIN_HEIGHT?s=l:console.log("The min-height attribute should be larger than "+MIN_HEIGHT+".")}var h=t["sample-code"].split(/\r?\n/).length;if(r=Math.max(47+18*(h-2),s),"maxHeight"in e.dataset){var c=Math.round(e.dataset.maxHeight);isNaN(c)?console.log("Invalid max-height attribute."):c>MIN_HEIGHT?r=Math.min(r,c):console.log("The max-height attribute should be larger than "+MIN_HEIGHT+".")}}return a.style.height=r+"px",n+="height:"+r+"px;",a.style.width="100%",a.style.minWidth="600px",n+="width:100%;min-width:600px;",a.setAttribute("style",n),a}function createDataForm(e){var t=(DATACAMP_LIGHT_URL+(window.location.hostname?window.location.hostname+"/?":"?")+createURLData({}),document.createElement("form"));t.setAttribute("method","post"),t.setAttribute("action",DATACAMP_LIGHT_URL),t.setAttribute("target",IFRAME_NAME);for(var a in e)if(e.hasOwnProperty(a)){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",a),r.setAttribute("value",stripIndent(e[a])),t.appendChild(r)}return t}function replaceDataCampExercises(){for(var e=document.querySelectorAll("[data-datacamp-exercise]"),t=0;t<e.length;t++){var a=e[t];if(!("lang"in a.dataset))return void console.log("DataCamp-Light: Missing the data-lang attribute.");var r={language:a.dataset.lang,"pre-exercise-code":"","sample-code":"",solution:"",sct:"",hint:""};for(processParagraphTags(r,a.getElementsByTagName("p")),processCodeTags(r,a.getElementsByTagName("code"));a.lastChild;)a.removeChild(a.lastChild);a.appendChild(createIFrame(a,r));var n=createDataForm(r);a.appendChild(n),n.submit(),a.removeChild(n)}}var MIN_HEIGHT=200,IFRAME_NAME="datacamp-light-iframe",DATACAMP_LIGHT_URL="https://light.datacamp.com/";document.addEventListener("DOMContentLoaded",replaceDataCampExercises,!1);